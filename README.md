# Generate Matrix from Changed Files

This repository contains a GitHub Action that generates a matrix based on changed files in a GitHub repository. The matrix generated by this action can be used in further steps of a GitHub Actions workflow. Each element in the matrix corresponds to a directory where files have changed.

This action is designed to work in conjunction with the [changed-files](https://github.com/tj-actions/changed-files) action, which should be used to generate the `all_changed_files` input.

## Inputs

- `all_changed_files`: This is a required input. It should contain a space-separated string of all changed files.
- `path_prefix`: This is an optional input, defaulting to an empty string. It defines a path prefix to strip from changed files.

## Outputs

- `matrix`: This is an output of the action. It provides a matrix for GitHub Actions, where each element corresponds to a directory with changed files.

## Usage

In your GitHub Actions workflow, you can use this action with the following YAML configuration:

```yaml
steps:
- name: Check out repository
  uses: actions/checkout@v2

- name: Get all changed files
  uses: tj-actions/changed-files@v2
  id: changed-files

- name: Generate Matrix
  uses: equilibri0/generate-matrix-from-changed-files@v1
  id: matrix
  with:
    all_changed_files: ${{ steps.changed-files.outputs.all_files }}
    path_prefix: 'src/'  # Change this to match your project structure

- name: Use the Matrix
  run: echo "The matrix is ${{ steps.matrix.outputs.matrix }}"
```

In the above example, we first checkout the repository, then use the [changed-files](https://github.com/tj-actions/changed-files) action to get all changed files. The output of this action is then passed as an input to the "Generate Matrix" step, which uses the `generate-matrix-from-changed-files` action.

The `path_prefix` input is also set in the "Generate Matrix" step. This should be adjusted according to your project's structure and where you want the matrix generation to start from. For example, if your source code resides in a 'src/' directory and you're only interested in changes within that directory, you would set `path_prefix` to 'src/'.

Finally, the matrix is used in the "Use the Matrix" step. This is just an example and in a real-world scenario, you'd use this matrix in a matrix strategy for running jobs.

Please note that this README assumes a certain workflow and usage. Depending on your specific use case, some adjustments may be necessary.
